<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Heroes Vs Villains</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>
</head>

<body>
  <div id="overlay">
      <div class="fightThing kapow"></div>
      <div class="fightThing bam"></div>
      <div class="fightThing thwack"></div>
      <div class="fightThing smack"></div>
      <div class="fightThing pow"></div>
  </div>
  <div id="winner">And the winner is: <span class="winner_name"></span></div>
    <div class="main-wrapper">

        <div class="card darth" data-name="Jesus">
            <div class="face front">
                <img class="logo" src="https://s3-us-west-2.amazonaws.com/s.cdpn.io/261096/Star_Wars_Logo.svg" />
                <h2>
                    <small>Jesus</small>
                </h2>
                <cite>
                    <a href="http://6kart.deviantart.com/art/Darth-Vader-415281288" target="_blank">Vader Image by 6Kart</a>
                </cite>
            </div>
            <div class="face back">
                <img src="http://img.lum.dolimg.com/v1/images/Darth-Vader_6bda9114.jpeg?region=0%2C23%2C1400%2C785&width=768" alt="Image of Darth Vader" />
            </div>
        </div>
        <div class="card luke" data-name="Devil">
            <div class="face front">
                <img class="logo" src="https://s3-us-west-2.amazonaws.com/s.cdpn.io/261096/Star_Wars_Logo.svg" />
                <h2>
                    <small>Devil</small>
                </h2>
                <cite>
                    <a href="http://salvadortrakal.deviantart.com/art/Luke-Skywalker-352420315" target="_blank">Luke Image by SalvadorTrakal</a>
                </cite>
            </div>
            <div class="face back">
                <img src="http://img.lum.dolimg.com/v1/images/Luke-Skywalker_dd9c9f9b.jpeg?region=0%2C0%2C1536%2C864&width=768" alt="Image of luke skywalker" />
            </div>
        </div>
        <div class="card batman" data-name="Batman">
            <div class="face front">
                <img class="logo" src="https://s3-us-west-2.amazonaws.com/s.cdpn.io/261096/Star_Wars_Logo.svg" />
                <h2>
                    <small>Batman</small>
                </h2>
                <cite>
                    <a href="http://6kart.deviantart.com/art/Darth-Vader-415281288" target="_blank">Vader Image by 6Kart</a>
                </cite>
            </div>
            <div class="face back">
                <img src="http://img.lum.dolimg.com/v1/images/Darth-Vader_6bda9114.jpeg?region=0%2C23%2C1400%2C785&width=768" alt="Image of Darth Vader" />
            </div>
        </div>
        <div class="card joker" data-name="Joker">
            <div class="face front">
                <img class="logo" src="https://s3-us-west-2.amazonaws.com/s.cdpn.io/261096/Star_Wars_Logo.svg" />
                <h2>
                    <small>Joker</small>
                </h2>
                <cite>
                    <a href="http://salvadortrakal.deviantart.com/art/Luke-Skywalker-352420315" target="_blank">Luke Image by SalvadorTrakal</a>
                </cite>
            </div>
            <div class="face back">
                <img src="http://img.lum.dolimg.com/v1/images/Luke-Skywalker_dd9c9f9b.jpeg?region=0%2C0%2C1536%2C864&width=768" alt="Image of luke skywalker" />
            </div>
        </div>
        <div class="card trump" data-name="Trump">
            <div class="face front">
                <img class="logo" src="https://s3-us-west-2.amazonaws.com/s.cdpn.io/261096/Star_Wars_Logo.svg" />
                <h2>
                    <small>Trump</small>
                </h2>
                <cite>
                    <a href="http://salvadortrakal.deviantart.com/art/Luke-Skywalker-352420315" target="_blank">Luke Image by SalvadorTrakal</a>
                </cite>
            </div>
            <div class="face back">
                <img src="http://img.lum.dolimg.com/v1/images/Luke-Skywalker_dd9c9f9b.jpeg?region=0%2C0%2C1536%2C864&width=768" alt="Image of luke skywalker" />
            </div>
        </div>
        <div class="card mexicans" data-name="Mexicans">
            <div class="face front">
                <img class="logo" src="https://s3-us-west-2.amazonaws.com/s.cdpn.io/261096/Star_Wars_Logo.svg" />
                <h2>
                    <small>Mexicans</small>
                </h2>
                <cite>
                    <a href="http://6kart.deviantart.com/art/Darth-Vader-415281288" target="_blank">Vader Image by 6Kart</a>
                </cite>
            </div>
            <div class="face back">
                <img src="http://img.lum.dolimg.com/v1/images/Darth-Vader_6bda9114.jpeg?region=0%2C23%2C1400%2C785&width=768" alt="Image of Darth Vader" />
            </div>
        </div>
        <div class="card brexitiers" data-name="Brexitiers">
            <div class="face front">
                <img class="logo" src="https://s3-us-west-2.amazonaws.com/s.cdpn.io/261096/Star_Wars_Logo.svg" />
                <h2>
                    <small>Brexitiers</small>
                </h2>
                <cite>
                    <a href="http://salvadortrakal.deviantart.com/art/Luke-Skywalker-352420315" target="_blank">Luke Image by SalvadorTrakal</a>
                </cite>
            </div>
            <div class="face back">
                <img src="http://img.lum.dolimg.com/v1/images/Luke-Skywalker_dd9c9f9b.jpeg?region=0%2C0%2C1536%2C864&width=768" alt="Image of luke skywalker" />
            </div>
        </div>
        <div class="card remainers" data-name="Remainers">
            <div class="face front">
                <img class="logo" src="https://s3-us-west-2.amazonaws.com/s.cdpn.io/261096/Star_Wars_Logo.svg" />
                <h2>
                    <small>Remainers</small>
                </h2>
                <cite>
                    <a href="http://6kart.deviantart.com/art/Darth-Vader-415281288" target="_blank">Vader Image by 6Kart</a>
                </cite>
            </div>
            <div class="face back">
                <img src="http://img.lum.dolimg.com/v1/images/Darth-Vader_6bda9114.jpeg?region=0%2C23%2C1400%2C785&width=768" alt="Image of Darth Vader" />
            </div>
        </div>
        <div class="card Taylor" data-name="Taylor-Swift">
            <div class="face front">
                <img class="logo" src="https://s3-us-west-2.amazonaws.com/s.cdpn.io/261096/Star_Wars_Logo.svg" />
                <h2>
                    <small>Taylor</small>
                    <br/>Swift</h2>
                <cite>
                    <a href="http://salvadortrakal.deviantart.com/art/Luke-Skywalker-352420315" target="_blank">Luke Image by SalvadorTrakal</a>
                </cite>
            </div>
            <div class="face back">
                <img src="http://img.lum.dolimg.com/v1/images/Luke-Skywalker_dd9c9f9b.jpeg?region=0%2C0%2C1536%2C864&width=768" alt="Image of luke skywalker" />
            </div>
        </div>
        <div class="card kanye" data-name="Kanye">
            <div class="face front">
                <img class="logo" src="https://s3-us-west-2.amazonaws.com/s.cdpn.io/261096/Star_Wars_Logo.svg" />
                <h2>
                    <small>Kanye</small>
                </h2>
                <cite>
                    <a href="http://6kart.deviantart.com/art/Darth-Vader-415281288" target="_blank">Vader Image by 6Kart</a>
                </cite>
            </div>
            <div class="face back">
                <img src="http://img.lum.dolimg.com/v1/images/Darth-Vader_6bda9114.jpeg?region=0%2C23%2C1400%2C785&width=768" alt="Image of Darth Vader" />
            </div>
        </div>
        <div class="card starks" data-name="The-Starks">
            <div class="face front">
                <img class="logo" src="https://s3-us-west-2.amazonaws.com/s.cdpn.io/261096/Star_Wars_Logo.svg" />
                <h2>
                    <small>The</small>
                    <br/>Starks</h2>
                <cite>
                    <a href="http://salvadortrakal.deviantart.com/art/Luke-Skywalker-352420315" target="_blank">Luke Image by SalvadorTrakal</a>
                </cite>
            </div>
            <div class="face back">
                <img src="http://img.lum.dolimg.com/v1/images/Luke-Skywalker_dd9c9f9b.jpeg?region=0%2C0%2C1536%2C864&width=768" alt="Image of luke skywalker" />
            </div>
        </div>
        <div class="card lannisters" data-name="The-Lannisters">
            <div class="face front">
                <img class="logo" src="https://s3-us-west-2.amazonaws.com/s.cdpn.io/261096/Star_Wars_Logo.svg" />
                <h2>
                    <small>The</small>
                    <br/>Lannisters</h2>
                <cite>
                    <a href="http://6kart.deviantart.com/art/Darth-Vader-415281288" target="_blank">Vader Image by 6Kart</a>
                </cite>
            </div>
            <div class="face back">
                <img src="http://img.lum.dolimg.com/v1/images/Darth-Vader_6bda9114.jpeg?region=0%2C23%2C1400%2C785&width=768" alt="Image of Darth Vader" />
            </div>
        </div>
        <div class="card bieber" data-name="J-Bieber">
            <div class="face front">
                <img class="logo" src="https://s3-us-west-2.amazonaws.com/s.cdpn.io/261096/Star_Wars_Logo.svg" />
                <h2>
                    <small>Justin</small>
                    <br/>Bieber</h2>
                <cite>
                    <a href="http://salvadortrakal.deviantart.com/art/Luke-Skywalker-352420315" target="_blank">Luke Image by SalvadorTrakal</a>
                </cite>
            </div>
            <div class="face back">
                <img src="http://img.lum.dolimg.com/v1/images/Luke-Skywalker_dd9c9f9b.jpeg?region=0%2C0%2C1536%2C864&width=768" alt="Image of luke skywalker" />
            </div>
        </div>
        <div class="card gomez" data-name="S-Gomez">
            <div class="face front">
                <img class="logo" src="https://s3-us-west-2.amazonaws.com/s.cdpn.io/261096/Star_Wars_Logo.svg" />
                <h2>
                    <small>Selina</small>
                    <br/>Gomez</h2>
                <cite>
                    <a href="http://6kart.deviantart.com/art/Darth-Vader-415281288" target="_blank">Vader Image by 6Kart</a>
                </cite>
            </div>
            <div class="face back">
                <img src="http://img.lum.dolimg.com/v1/images/Darth-Vader_6bda9114.jpeg?region=0%2C23%2C1400%2C785&width=768" alt="Image of Darth Vader" />
            </div>
        </div>
        <div class="card lemon" data-name="Lemon-Grab">
            <div class="face front">
                <img class="logo" src="https://s3-us-west-2.amazonaws.com/s.cdpn.io/261096/Star_Wars_Logo.svg" />
                <h2>
                    <small>Lemon</small>
                    <br/>Grab</h2>
                <cite>
                    <a href="http://salvadortrakal.deviantart.com/art/Luke-Skywalker-352420315" target="_blank">Luke Image by SalvadorTrakal</a>
                </cite>
            </div>
            <div class="face back">
                <img src="http://img.lum.dolimg.com/v1/images/Luke-Skywalker_dd9c9f9b.jpeg?region=0%2C0%2C1536%2C864&width=768" alt="Image of luke skywalker" />
            </div>
        </div>
        <div class="card finn" data-name="Finn">
            <div class="face front">
                <img class="logo" src="https://s3-us-west-2.amazonaws.com/s.cdpn.io/261096/Star_Wars_Logo.svg" />
                <h2>
                    <small>Finn</small>
                </h2>
                <cite>
                    <a href="http://salvadortrakal.deviantart.com/art/Luke-Skywalker-352420315" target="_blank">Luke Image by SalvadorTrakal</a>
                </cite>
            </div>
            <div class="face back">
                <img src="http://img.lum.dolimg.com/v1/images/Luke-Skywalker_dd9c9f9b.jpeg?region=0%2C0%2C1536%2C864&width=768" alt="Image of luke skywalker" />
            </div>
        </div>

        <a href="#" id="go-button">Fight!</a>

    </div>
    <footer>
        <audio id="soundEffects">
          <source src="effects.ogg" type="audio/ogg">
        </audio>
    </footer>
    <script type="text/javascript" src="script.js"></script>
    <script type="text/javascript">
    var selected_items = [];

    var soundEffects = new Audio('effects.ogg');

    $(".card").click(function(e){
        e.preventDefault();

        // $(this).toggleClass('flip');
        // $(this).toggleClass('selected');

        var clicked_card_name = $(this).attr('data-name');
          if (selected_items && selected_items.indexOf(clicked_card_name) >=0) {
            var index = selected_items.indexOf(clicked_card_name);

             selected_items.splice(index, 1);

             $(this).removeClass('selected');
          }
          else if (selected_items && selected_items.length >= 2){

          }
          else {

            selected_items.push(clicked_card_name);
            $(this).addClass('selected');
          }

    });

        $('#go-button').click(function(e){
          e.preventDefault();
          if (selected_items && selected_items.length ==2) {
            $('.card:not(.selected)').fadeOut();
            $('.card.selected').addClass('large');
            $('.card.large').removeClass('selected');
            $('#go-button').hide();
            $("html, body").animate({ scrollTop: 0 }, 500);

            setTimeout(function(){
              $('.card.large').addClass("flip");
            },750);
            setTimeout(function(){
              $('#overlay').fadeIn(function(){
                //perform animation and sound
                $('#overlay').addClass('active');
                soundEffects.play();
                  setTimeout(function(){
                    $('#overlay').fadeOut();
                    $('#winner span').html(calculateWinner() + '!');
                    $('#winner').fadeIn();
                  }, 6000);
              });
            },5000);
          }
          else {
            alert('Please select 2 cards!!!');
          }

        });

        function calculateWinner() {


          if (selected_items.length == 2) {
            var first_contender_name = selected_items[0];
            var second_contender_name = selected_items[1];
            var first_contender_powers = characters.find(x=> x.name === first_contender_name).powers;
            var second_contender_powers = characters.find(x=> x.name === second_contender_name).powers;
            var first_contender_nicename = characters.find(x=> x.name === first_contender_name).nicename;
            var second_contender_nicename = characters.find(x=> x.name === second_contender_name).nicename;
            var first_score = first_contender_powers.reduce((a, b) => a + b, 0);
            var second_score = second_contender_powers.reduce((a, b) => a + b, 0);
            if (first_score > second_score) {
              return first_contender_nicename;
            }
            else if (first_score < second_score) {
              return second_contender_nicename;
            }
            else {
              return 'a draw'

            }
          }
          else {
            return 'a draw'
          }
        }
    </script>


</body>
</html>
